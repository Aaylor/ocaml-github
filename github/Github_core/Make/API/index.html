<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>API (github.Github_core.Make.API)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../../index.html">github</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Github_core.Make.API</span></h1></header><div class="doc"><p>The <code class="code">API</code> module contains functionality that relates to the
entirety of the GitHub API and these bindings. In particular,
this module contains:</p><ul><li><a href="https://developer.github.com/v3/#http-verbs">generic accessor functions</a>,
not normally used directly, but useful if you wish to invoke
API endpoints not yet bound.</li><li>handler constructors to help with using the generic accessors</li><li>monad state injectors for setting things like default tokens or
user agent strings</li><li>cached, rate limit queries</li><li>error message utility functions</li></ul></div><div class="spec val" id="val-code_handler"><a href="#val-code_handler" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>code_handler : expected_code:Cohttp.Code.status_code <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-handler">handler</a></code></div><div class="doc"><p><code class="code">code_handler ~expected_code parse</code> is a response handler that
fires for responses with status <code class="code">expected_code</code> and applies
<code class="code">parse</code>.</p></div></div><div class="spec val" id="val-get"><a href="#val-get" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get : ?&#8288;rate:<a href="../index.html#type-rate">rate</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;fail_handlers:<span class="type-var">'a</span> <a href="../index.html#type-parse">parse</a> <a href="../index.html#type-handler">handler</a> list <span class="keyword">&#8209;&gt;</span> ?&#8288;expected_code:Cohttp.Code.status_code <span class="keyword">&#8209;&gt;</span> ?&#8288;media_type:string <span class="keyword">&#8209;&gt;</span> ?&#8288;headers:Cohttp.Header.t <span class="keyword">&#8209;&gt;</span> ?&#8288;token:<a href="../Token/index.html#type-t">Token.t</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;params:(string<span class="keyword"> * </span>string) list <span class="keyword">&#8209;&gt;</span> uri:Uri.t <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-parse">parse</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../Response/index.html#type-t">Response.t</a> <a href="../Monad/index.html#type-t">Monad.t</a></code></div><div class="doc"><p><code class="code">get ?rate ?fail_handlers ?expected_code ?headers ?token
        ?params uri p</code> is the <code class="code">p</code>-parsed response to a GitHub API HTTP
GET request to <code class="code">uri</code> with extra query parameters <code class="code">params</code> and
extra headers <code class="code">headers</code>. If <code class="code">token</code> is supplied, it will be
used instead of any token bound into the monad. <code class="code">p</code> will only
fire if the response status is <code class="code">expected_code</code> which defaults
to <code class="code">200 OK</code>. If the response status is not <code class="code">expected_code</code>,
<code class="code">fail_handlers</code>, if any, will be checked in the order
supplied. The <code class="code">rate</code> parameter determines which rate limit
accounting regime will be used for caching rate limit values
in response headers.</p></div></div><div class="spec val" id="val-get_stream"><a href="#val-get_stream" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_stream : ?&#8288;rate:<a href="../index.html#type-rate">rate</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;fail_handlers:<span class="type-var">'a</span> <a href="../Stream/index.html#type-parse">Stream.parse</a> <a href="../index.html#type-handler">handler</a> list <span class="keyword">&#8209;&gt;</span> ?&#8288;expected_code:Cohttp.Code.status_code <span class="keyword">&#8209;&gt;</span> ?&#8288;media_type:string <span class="keyword">&#8209;&gt;</span> ?&#8288;headers:Cohttp.Header.t <span class="keyword">&#8209;&gt;</span> ?&#8288;token:<a href="../Token/index.html#type-t">Token.t</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;params:(string<span class="keyword"> * </span>string) list <span class="keyword">&#8209;&gt;</span> uri:Uri.t <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../Stream/index.html#type-parse">Stream.parse</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../Stream/index.html#type-t">Stream.t</a></code></div><div class="doc"><p><code class="code">get_stream uri stream_p</code> is the <a href="../Stream/index.html#type-t">Stream.t</a> encapsulating
lazy <code class="code">stream_p</code>-parsed responses to GitHub API HTTP GET
requests to <code class="code">uri</code> and
<a href="https://developer.github.com/v3/#pagination">its
successors</a>. For an explanation of the other
parameters, see <a href="index.html#val-get">get</a>.</p></div></div><div class="spec val" id="val-post"><a href="#val-post" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>post : ?&#8288;rate:<a href="../index.html#type-rate">rate</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;fail_handlers:<span class="type-var">'a</span> <a href="../index.html#type-parse">parse</a> <a href="../index.html#type-handler">handler</a> list <span class="keyword">&#8209;&gt;</span> expected_code:Cohttp.Code.status_code <span class="keyword">&#8209;&gt;</span> ?&#8288;headers:Cohttp.Header.t <span class="keyword">&#8209;&gt;</span> ?&#8288;body:string <span class="keyword">&#8209;&gt;</span> ?&#8288;token:<a href="../Token/index.html#type-t">Token.t</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;params:(string<span class="keyword"> * </span>string) list <span class="keyword">&#8209;&gt;</span> uri:Uri.t <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-parse">parse</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../Response/index.html#type-t">Response.t</a> <a href="../Monad/index.html#type-t">Monad.t</a></code></div><div class="doc"><p><code class="code">post uri p</code> is the <code class="code">p</code>-parsed response to a GitHub API HTTP
POST request to <code class="code">uri</code>. For an explanation of the other
parameters, see <a href="index.html#val-get">get</a>.</p></div></div><div class="spec val" id="val-delete"><a href="#val-delete" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>delete : ?&#8288;rate:<a href="../index.html#type-rate">rate</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;fail_handlers:<span class="type-var">'a</span> <a href="../index.html#type-parse">parse</a> <a href="../index.html#type-handler">handler</a> list <span class="keyword">&#8209;&gt;</span> ?&#8288;expected_code:Cohttp.Code.status_code <span class="keyword">&#8209;&gt;</span> ?&#8288;headers:Cohttp.Header.t <span class="keyword">&#8209;&gt;</span> ?&#8288;token:<a href="../Token/index.html#type-t">Token.t</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;params:(string<span class="keyword"> * </span>string) list <span class="keyword">&#8209;&gt;</span> uri:Uri.t <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-parse">parse</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../Response/index.html#type-t">Response.t</a> <a href="../Monad/index.html#type-t">Monad.t</a></code></div><div class="doc"><p><code class="code">delete uri p</code> is the <code class="code">p</code>-parsed response to a GitHub API HTTP
DELETE request to <code class="code">uri</code>. For an explanation of the other
parameters, see <a href="index.html#val-get">get</a>.</p></div></div><div class="spec val" id="val-patch"><a href="#val-patch" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>patch : ?&#8288;rate:<a href="../index.html#type-rate">rate</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;fail_handlers:<span class="type-var">'a</span> <a href="../index.html#type-parse">parse</a> <a href="../index.html#type-handler">handler</a> list <span class="keyword">&#8209;&gt;</span> expected_code:Cohttp.Code.status_code <span class="keyword">&#8209;&gt;</span> ?&#8288;headers:Cohttp.Header.t <span class="keyword">&#8209;&gt;</span> ?&#8288;body:string <span class="keyword">&#8209;&gt;</span> ?&#8288;token:<a href="../Token/index.html#type-t">Token.t</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;params:(string<span class="keyword"> * </span>string) list <span class="keyword">&#8209;&gt;</span> uri:Uri.t <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-parse">parse</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../Response/index.html#type-t">Response.t</a> <a href="../Monad/index.html#type-t">Monad.t</a></code></div><div class="doc"><p><code class="code">patch uri p</code> is the <code class="code">p</code>-parsed response to a GitHub API HTTP
PATCH request to <code class="code">uri</code>. For an explanation of the other
parameters, see <a href="index.html#val-get">get</a>.</p></div></div><div class="spec val" id="val-put"><a href="#val-put" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>put : ?&#8288;rate:<a href="../index.html#type-rate">rate</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;fail_handlers:<span class="type-var">'a</span> <a href="../index.html#type-parse">parse</a> <a href="../index.html#type-handler">handler</a> list <span class="keyword">&#8209;&gt;</span> expected_code:Cohttp.Code.status_code <span class="keyword">&#8209;&gt;</span> ?&#8288;headers:Cohttp.Header.t <span class="keyword">&#8209;&gt;</span> ?&#8288;body:string <span class="keyword">&#8209;&gt;</span> ?&#8288;token:<a href="../Token/index.html#type-t">Token.t</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;params:(string<span class="keyword"> * </span>string) list <span class="keyword">&#8209;&gt;</span> uri:Uri.t <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-parse">parse</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../Response/index.html#type-t">Response.t</a> <a href="../Monad/index.html#type-t">Monad.t</a></code></div><div class="doc"><p><code class="code">put uri p</code> is the <code class="code">p</code>-parsed response to a GitHub API HTTP
PUT request to <code class="code">uri</code>. For an explanation of the other
parameters, see <a href="index.html#val-get">get</a>.</p></div></div><div class="spec val" id="val-set_user_agent"><a href="#val-set_user_agent" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>set_user_agent : string <span class="keyword">&#8209;&gt;</span> unit <a href="../Monad/index.html#type-t">Monad.t</a></code></div><div class="doc"><p><code class="code">set_user_agent ua</code> contains monadic state that will cause
bound requests to use the <code class="code">User-Agent</code> header value of <code class="code">ua</code>.</p></div></div><div class="spec val" id="val-set_token"><a href="#val-set_token" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>set_token : <a href="../Token/index.html#type-t">Token.t</a> <span class="keyword">&#8209;&gt;</span> unit <a href="../Monad/index.html#type-t">Monad.t</a></code></div><div class="doc"><p><code class="code">set_token token</code> contains monadic state that will cause bound
requests to use <code class="code">token</code> for authentication by default. This
function enables the creation of large, generic monadic
compositions that do not have to be parameterized by
authentication token.</p></div></div><div class="spec val" id="val-get_rate"><a href="#val-get_rate" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_rate : ?&#8288;rate:<a href="../index.html#type-rate">rate</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;token:<a href="../Token/index.html#type-t">Token.t</a> <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> <a href="../../../Github_t/index.html#type-rate">Github_t.rate</a> <a href="../Monad/index.html#type-t">Monad.t</a></code></div><div class="doc"><p><code class="code">get_rate ?rate ()</code> is the, possibly cached, rate limit
information for the rate limit regime <code class="code">?rate</code> (default <a href="../index.html#type-rate.Core">Core</a>).</p></div></div><div class="spec val" id="val-get_rate_limit"><a href="#val-get_rate_limit" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_rate_limit : ?&#8288;token:<a href="../Token/index.html#type-t">Token.t</a> <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> int <a href="../Monad/index.html#type-t">Monad.t</a></code></div><div class="doc"><p><code class="code">get_rate_limit ()</code> is the, possibly cached, <a href="../index.html#type-rate.Core">Core</a> total request
quota for the current token.</p></div></div><div class="spec val" id="val-get_rate_remaining"><a href="#val-get_rate_remaining" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_rate_remaining : ?&#8288;token:<a href="../Token/index.html#type-t">Token.t</a> <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> int <a href="../Monad/index.html#type-t">Monad.t</a></code></div><div class="doc"><p><code class="code">get_rate_remaining ()</code> is the, possibly cached, <a href="../index.html#type-rate.Core">Core</a> remaining
request quota for the current token.</p></div></div><div class="spec val" id="val-get_rate_reset"><a href="#val-get_rate_reset" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_rate_reset : ?&#8288;token:<a href="../Token/index.html#type-t">Token.t</a> <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> float <a href="../Monad/index.html#type-t">Monad.t</a></code></div><div class="doc"><p><code class="code">get_rate_reset ()</code> is the, possibly cached, <a href="../index.html#type-rate.Core">Core</a> UNIX
epoch expiry time (s) when the remaining request quota will be
reset to the total request quota for the current token.</p></div></div><div class="spec val" id="val-string_of_message"><a href="#val-string_of_message" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>string_of_message : <a href="../../../Github_t/index.html#type-message">Github_t.message</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p><code class="code">string_of_message message</code> is the English language error
message that GitHub generated in <code class="code">message</code>.</p></div></div></body></html>